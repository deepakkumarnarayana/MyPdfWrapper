/* PDF Night Mode Styles */

/* Base night mode styles for PDF.js viewer */
.pdf-night-mode {
  --pdf-bg-color: #1a1a1a;
  --pdf-text-color: #e0e0e0;
  --pdf-border-color: #404040;
  --pdf-toolbar-color: #2d2d2d;
  --pdf-button-hover-color: #404040;
}

/* Apply night mode filters to PDF content */
.pdf-night-mode .pdfViewer .page {
  background: var(--pdf-bg-color) !important;
  filter: invert(1) hue-rotate(180deg) brightness(0.9) contrast(1.1);
}

/* Preserve images by double-inverting them */
.pdf-night-mode .pdfViewer .page img {
  filter: invert(1) hue-rotate(180deg);
}

/* Style the text layer for better readability */
.pdf-night-mode .textLayer {
  color: var(--pdf-text-color) !important;
}

/* Annotation layer adjustments */
.pdf-night-mode .annotationLayer {
  filter: none; /* Preserve annotation colors */
}

/* Toolbar and UI elements */
.pdf-night-mode #toolbarContainer {
  background: var(--pdf-toolbar-color) !important;
  border-color: var(--pdf-border-color) !important;
}

.pdf-night-mode .toolbar {
  background: var(--pdf-toolbar-color) !important;
}

.pdf-night-mode #toolbarViewer {
  background: var(--pdf-toolbar-color) !important;
}

/* Buttons and controls */
.pdf-night-mode .toolbarButton {
  background: transparent !important;
  color: var(--pdf-text-color) !important;
}

.pdf-night-mode .toolbarButton:hover {
  background: var(--pdf-button-hover-color) !important;
}

/* Input fields */
.pdf-night-mode .toolbarField {
  background: var(--pdf-bg-color) !important;
  color: var(--pdf-text-color) !important;
  border-color: var(--pdf-border-color) !important;
}

/* Dropdown menus */
.pdf-night-mode .dropdownToolbarButton select {
  background: var(--pdf-bg-color) !important;
  color: var(--pdf-text-color) !important;
  border-color: var(--pdf-border-color) !important;
}

/* Sidebar */
.pdf-night-mode #sidebarContainer {
  background: var(--pdf-toolbar-color) !important;
  border-color: var(--pdf-border-color) !important;
}

.pdf-night-mode #sidebarContent {
  background: var(--pdf-toolbar-color) !important;
}

/* Thumbnail view */
.pdf-night-mode .thumbnail {
  border-color: var(--pdf-border-color) !important;
}

.pdf-night-mode .thumbnail:hover {
  border-color: var(--pdf-button-hover-color) !important;
}

/* Search results */
.pdf-night-mode .findbar {
  background: var(--pdf-toolbar-color) !important;
  border-color: var(--pdf-border-color) !important;
}

.pdf-night-mode .findbar input {
  background: var(--pdf-bg-color) !important;
  color: var(--pdf-text-color) !important;
  border-color: var(--pdf-border-color) !important;
}

/* Loading indicator */
.pdf-night-mode .loadingBar .progress {
  background: #4f46e5 !important; /* Keep primary color for progress */
}

/* Context menu */
.pdf-night-mode .contextMenu {
  background: var(--pdf-toolbar-color) !important;
  border-color: var(--pdf-border-color) !important;
  color: var(--pdf-text-color) !important;
}

.pdf-night-mode .contextMenu .menuItem:hover {
  background: var(--pdf-button-hover-color) !important;
}

/* Error messages */
.pdf-night-mode .errorWrapper {
  background: var(--pdf-bg-color) !important;
  color: var(--pdf-text-color) !important;
}

/* Print preview adjustments */
.pdf-night-mode.printMode .pdfViewer .page {
  filter: none !important; /* Disable night mode for printing */
  background: white !important;
}

/* Transitions for smooth mode switching */
.pdfViewer .page,
#toolbarContainer,
.toolbar,
#toolbarViewer,
.toolbarButton,
.toolbarField,
#sidebarContainer,
#sidebarContent {
  transition: filter 0.3s ease, background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .pdf-night-mode {
    --pdf-bg-color: #000000;
    --pdf-text-color: #ffffff;
    --pdf-border-color: #666666;
  }
  
  .pdf-night-mode .pdfViewer .page {
    filter: invert(1) contrast(1.5);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .pdfViewer .page,
  #toolbarContainer,
  .toolbar,
  #toolbarViewer,
  .toolbarButton,
  .toolbarField,
  #sidebarContainer,
  #sidebarContent {
    transition: none;
  }
}