<!DOCTYPE html>
<html>
<head>
    <title>Session Tracking Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-info { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .steps { background: #f5f5f5; padding: 15px; border-radius: 8px; }
        .step { padding: 8px 0; border-bottom: 1px solid #ddd; }
        .step:last-child { border-bottom: none; }
        .success { color: #4caf50; font-weight: bold; }
        .warning { color: #ff9800; font-weight: bold; }
    </style>
</head>
<body>
    <h1>üìö Session Tracking UI Test Instructions</h1>
    
    <div class="test-info">
        <h3>Test Environment Status:</h3>
        <p><span class="success">‚úÖ Frontend:</span> Running on http://localhost:3002</p>
        <p><span class="success">‚úÖ MSW Mock API:</span> Enabled (VITE_API_BASE_URL is commented out)</p>
        <p><span class="success">‚úÖ Session Components:</span> SessionStatusPanel, SessionHistoryModal created</p>
        <p><span class="warning">‚ö†Ô∏è Backend:</span> Not running (using MSW for testing)</p>
    </div>

    <div class="steps">
        <h3>Testing Steps:</h3>
        
        <div class="step">
            <strong>1. Open PDF Viewer:</strong><br>
            ‚Ä¢ Navigate to <a href="http://localhost:3002/dashboard" target="_blank">http://localhost:3002/dashboard</a><br>
            ‚Ä¢ Click on any book to open PDF viewer
        </div>
        
        <div class="step">
            <strong>2. Test Session Creation:</strong><br>
            ‚Ä¢ Check browser console for "Reading session started!" message<br>
            ‚Ä¢ Look for green notification: "Reading session started! üìö"<br>
            ‚Ä¢ Verify session status panel appears in top-right corner
        </div>
        
        <div class="step">
            <strong>3. Test Session Status Panel:</strong><br>
            ‚Ä¢ Verify timer shows running time (format: MM:SS or HH:MM:SS)<br>
            ‚Ä¢ Check pages read counter<br>
            ‚Ä¢ Click expand button (arrow) to see detailed metrics<br>
            ‚Ä¢ Verify reading speed calculation (pages/min)<br>
            ‚Ä¢ Check progress bar updates
        </div>
        
        <div class="step">
            <strong>4. Test Session History Modal:</strong><br>
            ‚Ä¢ Click "History" button in expanded session panel<br>
            ‚Ä¢ Check "Current PDF" tab shows sessions for this PDF<br>
            ‚Ä¢ Check "All Sessions" tab shows recent sessions<br>
            ‚Ä¢ Check "Statistics" tab shows totals and averages<br>
            ‚Ä¢ Verify all tabs display data correctly
        </div>
        
        <div class="step">
            <strong>5. Test Session End:</strong><br>
            ‚Ä¢ Click "End Session" button in session panel<br>
            ‚Ä¢ Check for notification with session summary<br>
            ‚Ä¢ Verify session panel disappears<br>
            ‚Ä¢ Navigate away from PDF and back to test auto-restart
        </div>
        
        <div class="step">
            <strong>6. Test Page Tracking:</strong><br>
            ‚Ä¢ Change pages in PDF viewer<br>
            ‚Ä¢ Verify current page updates in session panel<br>
            ‚Ä¢ Check that progress bar reflects page changes<br>
            ‚Ä¢ Verify reading speed recalculates
        </div>
    </div>
    
    <div class="test-info">
        <h3>Expected MSW API Calls (check Network tab):</h3>
        <p>‚Ä¢ <code>POST /api/sessions</code> - Create session</p>
        <p>‚Ä¢ <code>PUT /api/sessions/:id</code> - Update/end session</p>
        <p>‚Ä¢ <code>GET /api/sessions?pdf_id=X</code> - Get PDF sessions</p>
        <p>‚Ä¢ <code>GET /api/sessions?limit=20</code> - Get recent sessions</p>
    </div>
    
    <div class="test-info">
        <h3>Console Debug Messages to Watch For:</h3>
        <p>‚Ä¢ "Reading session started!"</p>
        <p>‚Ä¢ "Failed to start reading session:" (if errors)</p>
        <p>‚Ä¢ MSW request interception logs</p>
        <p>‚Ä¢ PostMessage communication from PDF.js viewer</p>
    </div>

    <p><strong>üöÄ Ready to test!</strong> Open <a href="http://localhost:3002" target="_blank">the application</a> and follow the steps above.</p>
</body>
</html>